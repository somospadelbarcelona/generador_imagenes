<!-- CONSOLA DE EMERGENCIA INTEGRADA -->
<div id="emergency-console"
    style="display:none; position:fixed; bottom:0; left:0; right:0; height:300px; background:#1e1e1e; color:#00ff00; font-family:monospace; font-size:12px; z-index:99999; border-top:3px solid #00ff00; overflow-y:auto; padding:10px;">
    <div
        style="display:flex; justify-content:space-between; align-items:center; margin-bottom:10px; border-bottom:1px solid #00ff00; padding-bottom:5px;">
        <strong style="color:#00ff00;">ðŸ”§ CONSOLA DE EMERGENCIA</strong>
        <button onclick="document.getElementById('emergency-console').style.display='none'"
            style="background:#ff0000; color:white; border:none; padding:5px 10px; cursor:pointer; border-radius:3px;">CERRAR</button>
    </div>
    <div id="console-output" style="white-space:pre-wrap; word-wrap:break-word;"></div>
    <div style="margin-top:10px; display:flex; gap:5px;">
        <input id="console-input" type="text" placeholder="Escribe comando aquÃ­..."
            style="flex:1; background:#2d2d2d; color:#00ff00; border:1px solid #00ff00; padding:5px; font-family:monospace;">
        <button onclick="executeConsoleCommand()"
            style="background:#00ff00; color:black; border:none; padding:5px 15px; cursor:pointer; font-weight:bold;">EJECUTAR</button>
    </div>
</div>

<!-- BotÃ³n flotante para abrir consola -->
<button onclick="document.getElementById('emergency-console').style.display='block'"
    style="position:fixed; bottom:20px; right:20px; background:#00ff00; color:black; border:none; padding:15px 20px; border-radius:50px; cursor:pointer; font-weight:bold; z-index:99998; box-shadow:0 4px 15px rgba(0,255,0,0.4); font-size:14px;">
    ðŸ”§ ABRIR CONSOLA
</button>

<script>
    // Interceptar console.log y mostrarlo en nuestra consola
    const consoleOutput = document.getElementById('console-output');
    const originalLog = console.log;
    const originalError = console.error;
    const originalWarn = console.warn;

    function addToConsole(message, type = 'log') {
        const output = document.getElementById('console-output');
        if (output) {
            const color = type === 'error' ? '#ff0000' : type === 'warn' ? '#ffff00' : '#00ff00';
            const timestamp = new Date().toLocaleTimeString();
            output.innerHTML += `<div style="color:${color}; margin-bottom:5px;">[${timestamp}] ${message}</div>`;
            output.scrollTop = output.scrollHeight;
        }
    }

    console.log = function (...args) {
        originalLog.apply(console, args);
        addToConsole(args.join(' '), 'log');
    };

    console.error = function (...args) {
        originalError.apply(console, args);
        addToConsole('âŒ ERROR: ' + args.join(' '), 'error');
    };

    console.warn = function (...args) {
        originalWarn.apply(console, args);
        addToConsole('âš ï¸ WARNING: ' + args.join(' '), 'warn');
    };

    // Ejecutar comandos desde la consola
    function executeConsoleCommand() {
        const input = document.getElementById('console-input');
        const command = input.value.trim();

        if (!command) return;

        addToConsole('> ' + command, 'log');

        try {
            const result = eval(command);
            if (result !== undefined) {
                addToConsole('â† ' + JSON.stringify(result, null, 2), 'log');
            }
        } catch (error) {
            addToConsole('âŒ ' + error.message, 'error');
        }

        input.value = '';
    }

    // Permitir Enter para ejecutar
    document.addEventListener('DOMContentLoaded', () => {
        const input = document.getElementById('console-input');
        if (input) {
            input.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') executeConsoleCommand();
            });
        }
    });

    // Mensaje de bienvenida
    setTimeout(() => {
        addToConsole('âœ… Consola de emergencia cargada', 'log');
        addToConsole('Puedes ejecutar comandos JavaScript aquÃ­', 'log');
    }, 1000);
</script>